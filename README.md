# Altailands Project API (Backend)

Бэкенд API для сайта недвижимости "Altailands", разработанный на Django и Django REST Framework.

## Функционал

*   Управление контактной информацией и режимом работы.
*   Управление новостями и категориями новостей.
*   Каталог объектов недвижимости:
    *   Земельные участки (разных типов).
    *   Комплексы/Проекты (апарт-отели, ЖК и т.д.).
    *   Юниты внутри комплексов (квартиры, апартаменты).
    *   Гибкая система характеристик и местоположений.
    *   Управление медиафайлами (фото, видео, документы).
    *   Фильтрация, поиск и сортировка объявлений.
*   Система Квизов (опросников).
*   Прием и обработка заявок (из квизов, контактной формы, от объявлений).
*   Комментарии администраторов к заявкам.
*   JWT Аутентификация для администраторов.
*   Базовая аналитика (счетчики просмотров, статистика заявок).
*   Автоматическая документация API (Swagger/ReDoc).

## Установка и Запуск

### Локальный запуск (для разработки)

1.  **Клонировать репозиторий:**
    ```bash
    git clone <URL репозитория>
    cd <папка проекта>
    ```
2.  **Создать и активировать виртуальное окружение:**
    ```bash
    python -m venv venv
    # Windows
    .\venv\Scripts\activate
    # macOS/Linux
    source venv/bin/activate
    ```
3.  **Установить зависимости:**
    ```bash
    pip install -r requirements.txt
    ```
4.  **Применить миграции:**
    ```bash
    python manage.py migrate
    ```
5.  **Создать суперпользователя (администратора):**
    ```bash
    python manage.py createsuperuser
    ```
6.  **Запустить сервер разработки:**
    ```bash
    python manage.py runserver
    ```
    Сервер будет доступен по адресу `http://127.0.0.1:8000/`.

### Запуск с использованием Docker

1.  **Убедиться, что Docker установлен и запущен.**
2.  **Собрать Docker образ:**
    ```bash
    docker build -t altailands-backend .
    ```
3.  **Запустить контейнер:**
    ```bash
    docker run -p 8000:8000 --name altailands-app -d altailands-backend
    ```
    *   `-p 8000:8000`: Пробрасывает порт 8000 контейнера на порт 8000 хоста.
    *   `--name altailands-app`: Задает имя контейнеру.
    *   `-d`: Запускает контейнер в фоновом режиме.

    Приложение будет доступно по адресу `http://localhost:8000` (или IP вашей Docker-машины).

4.  **Выполнение команд manage.py в контейнере:**
    *   Применить миграции: `docker exec altailands-app python manage.py migrate`
    *   Создать суперпользователя: `docker exec -it altailands-app python manage.py createsuperuser`
    *   Открыть shell: `docker exec -it altailands-app python manage.py shell`

## Документация API

После запуска сервера документация API доступна по следующим адресам:

*   **Swagger UI:** `http://localhost:8000/api/docs/`
*   **ReDoc:** `http://localhost:8000/api/redoc/`
*   **Скачать схему OpenAPI:** `http://localhost:8000/api/schema/`

## Основные эндпоинты

*   `/api/auth/` - Аутентификация (JWT)
*   `/api/v1/contacts/` - Контакты и режим работы
*   `/api/v1/news/` - Новости и категории
*   `/api/v1/listings/` - Объявления (участки, комплексы, юниты, справочники, медиа)
*   `/api/v1/quizzes/` - Квизы
*   `/api/v1/requests/` - Заявки и комментарии
*   `/api/v1/analytics/` - Аналитика (просмотры, статистика заявок)

Детальное описание всех эндпоинтов доступно в Swagger/ReDoc. 